---
title: V2ray (WebSocket+TLS+Cloudflare）手动配置详细说明
date: 2021-11-10 15:18:34
summary: 这是从网上复制下来的文章，原文链接：https://ericclose.github.io/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare.html
categories: v2ray
tags:
  - v2ray
cover: https://i.picsum.photos/1280/954
---

原文链接：<https://ericclose.github.io/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare.html>

**先决条件**

在**开始操作之前**，建议你先了解以下基础知识：

- 使用 ssh 命令或 ssh 客户端登录远程服务器
- 使用 vim 或其他编辑器的最基本的操作



## 购买 VPS

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">购买 VPS 的说明（点击以展开）</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><p style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">Hmmm… 本人学生党（穷 ➕ 没有办理国际信用卡），买境外的 VPS 不太方便。我找了相对便宜的（没有活动时的价格最低为<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">$3.71 / 月</strong>）且支持使用支付宝的 VPS 提供商 ——<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://cloudcone.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">CloudCone</strong></a>。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">注册登录没太多好说的，唯一的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">建议</strong>就是注册的时候填写<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">国外的邮箱</strong>（Cloudcone 将会通过这个邮箱告知你 VPS 的<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">IP 地址</strong>和<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">root 用户的初始密码</strong>）。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">这里简单说下如何<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">通过支付宝</strong>进行充值：</p><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/1.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 227.938px; width: 258.656px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/1.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 227.938px; width: 258.656px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/2.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 227.938px; width: 479.344px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/2.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 227.938px; width: 479.344px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">填写完<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">支付宝关联的邮箱地址</strong>（如支付宝未与任何邮箱关联，请自行搜索相关内容），会跳转至支付宝扫码付款的页面，付款成功就可新建 VPS 实例了。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">新建实例部分，本文以<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Debian 10</strong><span>&nbsp;</span>为例，您也可以使用其他 Linux 发行版本。如您使用其他 Linux 发行版本，本教程后续的部分命令或许会有些许差异（如软件包的安装等），当然本文对您仍具有参考意义。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">主机名</strong>按照框内灰色字体的格式填写即可。</p><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/3.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 353.031px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/3.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 353.031px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">新建实例成功后，请注意查看你<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">注册账号时的邮箱</strong>，是否收到包含服务器<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">公网 IPv4 地址</strong>和<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">root 用户初始密码</strong>的电子邮件。</p></div></details>

## 初始化 VPS

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">具体步骤</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><p style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">ssh 登录到远程服务器的 root 用户</strong>后再完成以下操作：</p><ol style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">更新</strong>系统已知的软件包列表、<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">升级</strong>系统上的所有软件包、<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">移除</strong>不再需要的依赖软件包：</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">apt update &amp;&amp; apt upgrade &amp;&amp; apt autoremove</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><blockquote style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 16px; background: var(--color-block); border-left: 4px solid rgb(33, 150, 243); border-radius: 4px; position: relative; width: 742px; transition: all 0.28s ease 0s; text-align: left; overflow-wrap: normal; font-size: 0.9375rem;"><p style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 0px; text-align: left; max-width: 100%; line-height: inherit; overflow-wrap: normal; font-size: 0.9375rem;">正经的 Linux 用户不会用 root 干所有的事情，如果这么做的话将会很危险。创建一个普通的用户，并让它可以通过<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">sudo</em><span>&nbsp;</span>指令用 root 权限执行命令是一般的解决方案。</p></blockquote><ol start="2" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">在用<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">sudo</em><span>&nbsp;</span>之前，我们需要先安装<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">sudo</strong><span>&nbsp;</span>这个软件包：</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">apt install sudo</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="3" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">新建</strong>一个普通用户，本文新建名为<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">eric</code><span>&nbsp;</span>的用户（同时创建相应的 home 目录），并将其添加到 sudo 用户组中；最后给 eric 设置一个密码：</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">useradd -m -G sudo eric</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">passwd eric</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="4" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">更改</strong><span>&nbsp;</span>eric 的默认 shell</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/4.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 118.781px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/4.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 118.781px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><ol start="5" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">相关建议（可选操作）</li></ol><div class="tabs" id="1" style="box-sizing: border-box; outline: none; margin: 1em 0px 0px; padding: 0px; display: block; position: relative; border-radius: 4px; background: var(--color-card); border: 1px solid rgba(68, 68, 68, 0.2); font-size: 0.9375rem;"><ul class="nav-tabs" style="box-sizing: border-box; outline: none; margin: 0px !important; padding: 8px 8px 0px; font-size: 0.9375rem; list-style: initial; display: flex; overflow-x: auto; white-space: nowrap; justify-content: flex-start; background: var(--color-block); border-radius: 4px 4px 0px 0px; line-height: 1.5;"><li class="tab active" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px 16px 0px 0px; list-style: none;"><a class="#1-1" href="https://ericclose.github.io/" onclick="return false;" title="Click me!" style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px; color: var(--color-p); cursor: default; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; display: block; border-radius: 4px 4px 0px 0px; text-align: center; font-size: 0.875rem; line-height: inherit; font-weight: bold; border-top: 1px solid rgba(68, 68, 68, 0.2); border-right: 1px solid rgba(68, 68, 68, 0.2); border-bottom: 1px solid var(--color-card); border-left: 1px solid rgba(68, 68, 68, 0.2); border-image: initial; background: rgb(255, 255, 255);">相关建议</a></li></ul><div class="tab-content" style="box-sizing: border-box; outline: none; margin: -1px 0px 0px; padding: 0px; border-top: 1px solid rgba(68, 68, 68, 0.2);"><div class="tab-pane active" id="1-1" style="box-sizing: border-box; outline: none; margin: 0px; padding: 16px; display: block;"><p style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">为了安全</strong>起见，建议你完成下列操作：</p><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">禁止通过 SSH 登录到 root 用户</li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">限制 SSH 通过用户密码来登录，并实现 SSH 仅能通过密钥登录服务器</li></ul><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">提一下要点，不知道怎么做的话就 Google 学习一个（</p><details green="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgb(235, 249, 237); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px; padding: 16px; display: block; cursor: pointer; border-radius: 4px; color: rgba(68, 68, 68, 0.7); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(235, 249, 237);">操作要点</summary></details></div></div></div></div></details>

## 安装 V2Ray 前的准备

> 正经的 Linux 用户不会用 root 干所有的事情，如果这么做的话将会很危险。所以**使用普通用户**，再通过 *sudo* 指令用 root 权限执行命令是坠吼的。

**使用普通用户**通过 ssh 登录到你的远程服务器后再完成以下操作：

### 时间校准

> 对于 V2Ray，它的验证方式包含时间，就算是配置没有任何问题，如果时间不正确，也无法连接 V2Ray 服务器的，服务器会认为你这是不合法的请求。所以系统时间一定要正确，只要保证时间误差在 **90 秒** 之内就没问题。

```
COPYsudo timedatectl set-ntp true # 启用 NTP 服务
sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # 将时区设为“亚洲/上海”
sudo hwclock --systohc # 将硬件时钟调整到与当前系统时间一致
date -R # 以 RFC 5322 格式输出日期和时间。例如 Mon, 18 Jan 2021 11:04:16 +0800
```

执行完之后，终端显示的时间如果正确，那么就没问题了。

### 防火墙初始化

- 本文将使用 *ufw* 来管理系统的防火墙

```
COPYsudo apt install ufw
sudo ufw enable
sudo ufw allow 'OpenSSH'
```

### 安装相关软件包

1. **更新**系统已知的软件包列表、**升级**系统上的所有软件包、**移除**不再需要的依赖软件包：

```
COPYsudo apt update && sudo apt upgrade && sudo apt autoremove
```

1. **安装编辑器** vim（后续编写配配置文件需要，当然你也可以使用其他编辑器）

```
COPYsudo apt install vim
```

1. **安装**所需要的依赖软件包：

```
COPYsudo apt install curl openssl
```

## 安装并配置 V2Ray

### 下载 V2Ray 安装脚本

```
COPYcurl -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh
curl -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-dat-release.sh
```

### 安装 V2ray 主程序

```
COPYsudo bash install-release.sh
```

### 安装最新发行的 geoip.dat 和 geosite.dat

- `geoip.dat`：IP 数据文件
- `geosite.dat`：域名数据文件

```
COPYsudo bash install-dat-release.sh
```

### 配置 V2Ray

使用 vim 编辑 V2Ray 的配置文件：

```
COPYsudo vim /usr/local/etc/v2ray/config.json
```

清空文件原有内容，然后输入以下内容：

```
/usr/local/etc/v2ray/config.jsonCOPY{
    "log":{
        "loglevel":"warning"
    },
    "routing":{
        "domainStrategy":"AsIs",
        "rules":[
            {
                "type":"field",
                "ip":[
                    "geoip:private"
                ],
                "outboundTag":"block"
            }
        ]
    },
    "inbounds":[
        {
            "listen":"127.0.0.1",
            "port":10000,
            "protocol":"vmess",
            "settings":{
                "clients":[
                    {
                        "id":"9dfe7fee-d08f-44f8-ad2d-300d4c9c3a0e",
                        "alterId":64
                    }
                ]
            },
            "streamSettings":{
                "network":"ws",
                "wsSettings":{
                    "path":"/ray"
                }
            }
        }
    ],
    "outbounds":[
        {
            "protocol":"freedom",
            "tag":"direct"
        },
        {
            "protocol":"blackhole",
            "tag":"block"
        }
    ]
}
```

> - `port`：V2Ray 的 **WebSocket 所监听的内网端口**，取值范围是 **1 ~ 65535**，但**为了避免端口占用，所以不能填常用的端口号**（如 22 是 *ssh* 的端口号，80 是 *HTTP* 的端口号，443 是 *HTTPS* 的端口号等），此处设我为 `10000`
> - `id`：**用户的主 ID**。可**通过 [UUID 生成器 - v2fly](https://www.v2fly.org/awesome/tools.html#在线工具) 或者 [Online UUID Generator](https://www.uuidgenerator.net/) 生成**（任选其中一个网站生成就行），此处我设为 `9dfe7fee-d08f-44f8-ad2d-300d4c9c3a0e`
> - `alterId`：**额外 ID 数量**。为了进一步防止被探测，一个用户可以在主 ID 的基础上，再额外生成多个 ID。`alterId` 就是用来指定额外 ID 数量的，其取值范围是 **0 ~ 65535**，**理论上 alterId 越大越好，但越大就越占内存**(只针对服务器，客户端不占内存)。据[新 V2Ray 白话文指南](https://guide.v2fly.org/basics/vmess.html#服务器)所述，`alterId` 的值设为 **30 ~ 100 之间应该是比较合适的**，这里我直接抄它设置为 `64` 🤣
> - `network`：**传输协议**。设为 **WebSocket**，即 `ws`
> - `path`：**WebSocket 所使用的 HTTP 协议路径**。可自定义，例如我设为 `/ray`

[![This is a picture without description](https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/5.png)](https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/5.png)



[![This is a picture without description](https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/6.png)](https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/6.png)

**咳咳，上面的配置文件想要照抄的话至少 id 取不一样的值就好** 🤣

## 注册域名

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">注册域名的说明</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><p style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">域名可通过网站<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://www.namesilo.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">NameSilo</a><span>&nbsp;</span>进行申请注册，这个站点<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">最低可花 $0.99</strong><span>&nbsp;</span>即可注册申请一年的域名，同时还支持免费启用<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">WHOIS privacy</strong>（WHOIS 隐私服务大致的意思是：从 WHOIS 记录中删除您的个人联系信息）。</p><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">在<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">NameSilo</strong><span>&nbsp;</span>注册完登录账号，然后搜索你想要的域名，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">选择域名</strong>。选择<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">最便宜的就行</strong>（至于<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">续费域名</strong>的费用比较高，所以建议是<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">域名过期后再换</strong>就行）：</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/7.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 295.609px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/7.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 295.609px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">点击<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Add</strong><span>&nbsp;</span>之后，会跳转如下界面（此处注意关掉<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">自动续费</strong>，打开<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">WHOIS 隐私</strong>服务）：</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/8.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 549.859px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/8.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 549.859px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">支付方面，NameSilo 也是支持支付宝进行支付的，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">填写支付宝相关联的邮箱地址</strong>，然后进行扫码支付。</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/9.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 463.812px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/9.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 463.812px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">付款成功后<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">点击</strong>页面里的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Account Domains</strong><span>&nbsp;</span>账户所属域名」栏里的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">数字</strong></li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/10.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 519.172px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/10.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 519.172px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">然后跳转到<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">信息填写页面</strong>，这些信息可以通过<a target="_blank" rel="noopener" href="https://www.haoweichi.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">美国虚拟信息生成器</a><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">生成</strong>然后进行填写（<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">其中带<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">*</code><span>&nbsp;</span>号的为必填项</strong>）</li></ul><div class="img-wrap" style="box-sizing: border-box; outline: none; margin: 1.5rem auto; padding: 0px; text-align: center; border-radius: 2px; overflow: hidden;"><div class="img-bg" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; width: 742px;"><img class="img" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/11.png" alt="image" style="box-sizing: border-box; outline: none; margin: auto; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; display: block; border-radius: 4px; object-fit: contain; height: 400px;"></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">填写完信息后，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">点击 🌏 图标管理域名的 DNS</strong>，然后在 DNS 管理页面<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">点击 ❌ 删除所有的记录</strong></li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/12.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 153.438px; width: 398.25px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/12.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 153.438px; width: 398.25px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/13.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 153.438px; width: 339.75px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/13.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 153.438px; width: 339.75px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><div class="note warning" style="box-sizing: border-box; outline: none; margin: 1em 0px 0px; padding: 16px 16px 16px calc(32px); position: relative; border-radius: 4px; font-size: 0.9375rem; background: rgb(255, 248, 233); border-left: 4px solid rgb(255, 189, 43); border-top-color: rgb(255, 189, 43); border-right-color: rgb(255, 189, 43); border-bottom-color: rgb(255, 189, 43);"><p style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">注册完域名记得前往您的电子邮箱查收来自 NameSilo 的邮件，必须点击 WHOIS 的邮箱验证链接，否则您的域名可能将被注销。</strong></p></div></div></details>

## Cloudflare 接管域名解析

完成前面的步骤后，我们将在这一步使用 Cloudflare 来接管域名的解析。

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">具体步骤</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><ol style="box-sizing: border-box; outline: none; margin: 0px 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">注册</strong><span>&nbsp;</span>Cloudflare 的账号，注册完账号之后，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">请前往邮箱查看来自 Cloudflare 的邮件，点击验证链接以验证您的电子邮箱</strong>。</li></ol><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><a target="_blank" rel="noopener" href="https://www.cloudflare.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">Cloudflare 官网</a></li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/14.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 129.688px; width: 245.328px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/14.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 129.688px; width: 245.328px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/15.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 129.688px; width: 245.328px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/15.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 129.688px; width: 245.328px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/16.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 129.688px; width: 245.328px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/16.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 129.688px; width: 245.328px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="2" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">添加站点</strong>，输入先前注册的域名即可。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/17.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 339.062px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/17.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 339.062px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="3" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">选择「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">免费计划</strong>」</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/18.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 349.953px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/18.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 349.953px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="4" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">暂不</strong>添加 DNS 记录</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/19.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 350.344px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/19.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 350.344px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="5" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">前往域名提供商（如前面介绍的<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://www.namesilo.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">NameSilo</a>），点击图示部分进行<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">域名服务器的管理</strong></li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/20.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 293.938px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/20.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 293.938px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="6" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">移除</strong>域名提供商预置的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">域名服务器</strong>」，用 Cloudflare 提供的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">域名服务器</strong>」<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">替换</strong>之。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/21.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 155.953px; width: 337.578px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/21.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 155.953px; width: 337.578px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/22.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 155.953px; width: 220.312px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/22.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 155.953px; width: 220.312px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/23.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 155.953px; width: 178.109px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/23.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 155.953px; width: 178.109px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="7" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Submit</strong><span>&nbsp;</span>提交」完上述变更之后，等待若干分钟后域名的状态转为「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">active</strong><span>&nbsp;</span>激活」。然后点击「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Done, check nameservers</strong>」。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/24.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 203.328px; width: 409.5px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/24.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 203.328px; width: 409.5px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/25.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 203.328px; width: 328.5px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/25.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 203.328px; width: 328.5px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="8" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">点击「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Finish later</strong>」，然后再回到<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://www.cloudflare.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">Cloudflare 首页</a>，等待若干分钟后「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Pending Nameserver Update</strong>」会转为「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">active</strong>」，这时<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">点进去</strong>。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/26.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 169.859px; width: 228.344px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/26.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 169.859px; width: 228.344px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/27.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 169.859px; width: 260.25px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/27.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 169.859px; width: 260.25px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/28.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 169.859px; width: 247.406px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/28.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 169.859px; width: 247.406px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="9" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">添加</strong><span>&nbsp;</span>DNS 记录</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/29.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 354.781px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/29.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 354.781px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ol start="10" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">如下图表<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">添加</strong><span>&nbsp;</span>2 条记录就可以了。</li></ol><overflow style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: inline-block; max-width: 100%; vertical-align: text-top;"><thead style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: rgb(254, 254, 254); transition: all 0.28s ease 0s;"><th style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; background-color: rgb(241, 241, 241); border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;">Type</th><th style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; background-color: rgb(241, 241, 241); border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;">Name</th><th style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; background-color: rgb(241, 241, 241); border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;">IPv4 address</th><th style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; background-color: rgb(241, 241, 241); border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;">Proxy status</th></tr></thead><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: rgb(254, 254, 254); transition: all 0.28s ease 0s;"><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">A</code></td><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">@</code></td><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">x.x.x.x</code></td><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">☁ Proxied</code></td></tr><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: rgb(254, 254, 254); transition: all 0.28s ease 0s;"><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">A</code></td><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">www</code></td><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">x.x.x.x</code></td><td style="box-sizing: border-box; outline: none; margin: 0px; padding: 8px 16px; border: 2px solid rgb(241, 241, 241); line-height: 1.5; font-size: 13.5px;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">☁ Proxied</code></td></tr></tbody></table></overflow><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">云朵被点亮（即<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">☁ Proxied</code>）意味着你的网站流量必须经过 Cloudflare，也可以说使用了 Cloudflare 的 CDN 节点。</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/30.png" data-fancybox="default" data-caption="添加一条记录的示例" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 255.969px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/30.png" alt="添加一条记录的示例" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 255.969px; width: 740px; display: inline;"></a><span class="image-caption" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0.5em 0px 1em; font-size: 0.8125rem; color: rgb(255, 255, 255); opacity: 0; transform: translateY(100%); transition: all 0.3s ease 0s; pointer-events: none; position: absolute; width: 740px; bottom: 0px; text-align: center; background: rgba(0, 0, 0, 0.3);">添加一条记录的示例</span></div></div></div></details>

## 安装 Nginx 及其初始配置

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">具体步骤</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><div class="note warning" style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 16px 16px 16px calc(32px); position: relative; border-radius: 4px; font-size: 0.9375rem; background: rgb(255, 248, 233); border-left: 4px solid rgb(255, 189, 43); border-top-color: rgb(255, 189, 43); border-right-color: rgb(255, 189, 43); border-bottom-color: rgb(255, 189, 43);"><p style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">请将本文中的<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">ericclose.xyz</code><span>&nbsp;</span>替换成您注册的域名</strong></p></div><h3 id="安装-Nginx" style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; font-size: 1.25rem; font-weight: 500; text-align: left; color: var(--color-h3); position: relative; pointer-events: none;"><a href="https://ericclose.github.io/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare.html#%E5%AE%89%E8%A3%85-Nginx" class="headerlink" title="安装 Nginx" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: inherit; cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; pointer-events: auto;"></a>安装 Nginx</h3><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo apt install nginx</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><h3 id="配置防火墙" style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; font-size: 1.25rem; font-weight: 500; text-align: left; color: var(--color-h3); position: relative; pointer-events: none;"><a href="https://ericclose.github.io/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare.html#%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99" class="headerlink" title="配置防火墙" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: inherit; cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; pointer-events: auto;"></a>配置防火墙</h3><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo ufw allow <span class="string" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(68, 158, 72);">'Nginx Full'</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><h3 id="配置-Nginx" style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; font-size: 1.25rem; font-weight: 500; text-align: left; color: var(--color-h3); position: relative; pointer-events: none;"><a href="https://ericclose.github.io/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare.html#%E9%85%8D%E7%BD%AE-Nginx" class="headerlink" title="配置 Nginx" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: inherit; cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; pointer-events: auto;"></a>配置 Nginx</h3><ol style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">Nginx 在安装过程中会创建一个<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">默认的服务器块</strong>。如果它仍然存在，请<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">将其删除</strong>，因为你后面将<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">为你注册的域名配置一个自定义服务器块</strong></li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo rm /etc/nginx/sites-enabled/default</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="2" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">使用如下命令，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">为你的域名创建目录</strong></li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo mkdir -p /var/www/ericclose.xyz/html</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="3" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">接下来，用<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">$USER</code><span>&nbsp;</span>环境变量<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">给当前的系统用户分配目录的所有权</strong></li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo chown -R <span class="variable" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">$USER</span>:<span class="variable" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">$USER</span> /var/www/ericclose.xyz/html</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="4" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">使用命令<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">确保 web root 具有正确的权限</strong></li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo chmod -R 755 /var/www/ericclose.xyz</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="5" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">接下来，使用<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">vim</code><span>&nbsp;</span>或其他编辑器<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">创建<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">index.html</code><span>&nbsp;</span>页面文件</strong></li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">vim /var/www/ericclose.xyz/html/index.html</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">文件<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">写入以下内容</strong>：</p><figure class="highlight html" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><figcaption style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; display: block; font-size: 13px; position: sticky; left: 0px; background: rgb(234, 234, 234); border-top-left-radius: calc(3px); border-top-right-radius: calc(3px);"><span style="box-sizing: border-box; outline: none; margin: 0px 5px 0px 0px; padding: 0px; display: inline-block;">/var/www/ericclose.xyz/html/index.html</span></figcaption><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"><span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">html</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">head</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">title</span>&gt;</span>Welcome<span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;/<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">title</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;/<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">head</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">body</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">h1</span>&gt;</span>Success! Your Nginx server is successfully configured. <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;/<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">h1</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"><span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">p</span>&gt;</span>This is a sample page.<span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;/<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">p</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    <span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;/<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">body</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"><span class="tag" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">&lt;/<span class="name" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(238, 43, 41);">html</span>&gt;</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="6" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">我们需要<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">创建一个服务器块，指向我们自定义的 web root</strong>。我们不直接修改默认的配置文件，而是新建一个文件</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo vim /etc/nginx/sites-available/ericclose.xyz</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">填写以下内容：</p><figure class="highlight nginx" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><figcaption style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; display: block; font-size: 13px; position: sticky; left: 0px; background: rgb(234, 234, 234); border-top-left-radius: calc(3px); border-top-right-radius: calc(3px);"><span style="box-sizing: border-box; outline: none; margin: 0px 5px 0px 0px; padding: 0px; display: inline-block;">/etc/nginx/sites-available/ericclose.xyz</span></figcaption><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"><span class="section" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">server</span> {</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">listen</span> <span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">80</span>;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">listen</span> [::]:<span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">80</span>;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">root</span> /var/www/ericclose.xyz/html;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">index</span> index.html index.htm index.nginx-debian.html;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">server_name</span> ericclose.xyz www.ericclose.xyz;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">location</span> / {</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">                <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">try_files</span> $uri $uri/ =<span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">404</span>;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">        }</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">}</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><blockquote style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 16px; background: var(--color-block); border-left: 4px solid rgb(33, 150, 243); border-radius: 4px; position: relative; width: 742px; transition: all 0.28s ease 0s; text-align: left; overflow-wrap: normal; font-size: 0.9375rem;"><ul style="box-sizing: border-box; outline: none; margin: 0.5em 0px 0.5em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial; text-align: left; overflow-wrap: normal;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">注意要记得修改配置文件中的<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">root</code><span>&nbsp;</span>项和<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">server_name</code><span>&nbsp;</span>项中的<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">ericclose.xyz</code>，更改为您的域名即可</strong>。</li></ul></blockquote><ol start="7" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">接下来，让我们通过在<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">sites-enabled</code><span>&nbsp;</span>目录下<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">创建一个符号链接</strong>来启用这个服务器块，Nginx 在启动时会在这个目录下读取配置文件：</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo ln -s /etc/nginx/sites-available/ericclose.xyz /etc/nginx/sites-enabled/</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="8" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">为了<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">防止可能出现的内存问题</strong>，有必要调整<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">/etc/nginx/nginx.conf</code><span>&nbsp;</span>文件中的一个值。</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo vim /etc/nginx/nginx.conf</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">找到<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">server_names_hash_bucket_size</code>，将<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">#</code><span>&nbsp;</span>符号去掉，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">取消这一行的注释</strong>。</p><figure class="highlight nginx" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">...</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"><span class="section" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">http</span> {</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    ...</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    <span class="attribute" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(63, 81, 181);">server_names_hash_bucket_size</span> <span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">64</span>;</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">    ...</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">}</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">...</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="9" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">接下来，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">测试一下 Nginx 文件中是否有语法错误</strong>。</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo nginx -t</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="10" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">最后，若你的配置测试没有遇到问题，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">重启 Nginx 来启用你的更改</strong>。</li></ol><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo systemctl restart nginx</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="11" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">现在可以<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">访问您注册的域名</strong>了，如下：</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/31.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 96.0938px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/31.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 96.0938px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div></div></details>

## 使用 Cloudflare 生成 TLS 证书和私钥、部署 Authenticated Origin Pulls

### 生成 TLS 证书和私钥

生成证书的方法有很多，[新 V2Ray 白话文指南](https://guide.v2fly.org/advanced/tls.html#安装证书和密钥)使用 [acme.sh](https://github.com/acmesh-official/acme.sh) 生成证书，我这里的话则是通过 Cloudflare 网站生成🤣。

注意：「**Cloudflare Origin Certificate**」是一个只被 Cloudflare 信任的证书，不被浏览器所信任，所以使用「**Cloudflare Origin Certificate**」就必须在前面**使用 Cloudflare 添加 DNS 记录时将云朵点亮**，即 `☁ Proxied`。**如果不点亮云朵，您的网站将无法安全访问，同时代理也会无法正常连接。** – from [HTTPS certificate not trusted with Cloudflare Origin Certificate](https://community.cloudflare.com/t/https-certificate-not-trusted/3610/12)

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">具体步骤</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><p style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">Cloudflare Origin CA 可以让你生成由 Cloudflare 签署的免费 TLS 证书，安装在你的 Nginx 服务器上，以此可以保护 Cloudflare 的服务器和你的 Nginx 服务器之间的连接。</p><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">要使用 Origin CA 生成证书，请在浏览器中登录<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://www.cloudflare.com/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">Cloudflare</a><span>&nbsp;</span>账户。选择您要保护的域名，并导航到 Cloudflare 仪表板的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">SSL/TLS</strong>」部分。然后再从导航到「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Origin Server</strong>」选项卡，然后单击「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Create Certificate</strong><span>&nbsp;</span>创建证书」按钮。</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/32.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 354.781px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/32.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 354.781px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">保留选择「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Let Cloudflare generate a private key and a CSR</strong>」，「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Private key type</strong><span>&nbsp;</span>私钥类型」我们选择「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">ECDSA</strong>」，关于 ECDSA 相较于 RSA 的优点请自行搜索。其余选项默认，「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Next</strong><span>&nbsp;</span>下一步」即可</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="img-wrap" style="box-sizing: border-box; outline: none; margin: 1.5rem auto; padding: 0px; text-align: center; border-radius: 2px; overflow: hidden;"><div class="img-bg" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; width: 406.109px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/33.png" data-fancybox="default" data-caption="image" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch;"><img fancybox="" itemprop="contentUrl" class="img" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/33.png" alt="image" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: contain; display: inline; height: 450px;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div></div></div><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">然后你会看到一个对话框，里面有「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Origin Certificate</strong><span>&nbsp;</span>源证书」和「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Private key</strong><span>&nbsp;</span>私钥」。你需要将证书和私钥的内容写到你的服务器上。出于安全考虑，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">私钥信息仅显示一次，之后不会再显示</strong>，所以在点击「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">OK</strong>」之前，最好先将相关内容<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">复制后妥善保管</strong>。</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/34.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 242.859px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/34.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 242.859px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><div class="note warning" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px 16px 16px calc(32px); position: relative; border-radius: 4px; font-size: 0.9375rem; background: rgb(255, 248, 233); border-left: 4px solid rgb(255, 189, 43); border-top-color: rgb(255, 189, 43); border-right-color: rgb(255, 189, 43); border-bottom-color: rgb(255, 189, 43);"><p style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">你将使用服务器上的<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">/etc/ssl</code><span>&nbsp;</span>目录来存放<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">源证书</strong>和<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">私钥</strong>文件。</p></div><div class="note warning" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px 16px 16px calc(32px); position: relative; border-radius: 4px; font-size: 0.9375rem; background: rgb(255, 248, 233); border-left: 4px solid rgb(255, 189, 43); border-top-color: rgb(255, 189, 43); border-right-color: rgb(255, 189, 43); border-bottom-color: rgb(255, 189, 43);"><p style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">关于 Nginx 的相关配置将在后面讲解。</p></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">在服务器上，使用用 vim 或其他文本编辑器编辑<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">/etc/ssl/cert.pem</code>：</li></ul><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo vim /etc/ssl/cert.pem</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">将先前保存的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">证书</strong>内容添加到文件中，然后保存并退出编辑器。</p><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">在服务器上，使用用 vim 或其他文本编辑器编辑<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">/etc/ssl/key.pem</code>：</li></ul><figure class="highlight bash" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">sudo vim /etc/ssl/key.pem</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">将先前保存的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">私钥</strong>内容添加到文件中，然后保存并退出编辑器。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">现在进入 Cloudflare 仪表板的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">SSL/TLS</strong>」部分，导航到「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Overview</strong>」选项卡，并将 SSL/TLS 加密模式改为「<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Full (strict)</strong><span>&nbsp;</span>」。这将<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">确保 Cloudflare 始终加密 Cloudflare 和你的 Nginx 服务器之间的连接</strong>。</p><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/35.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 349.953px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/35.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 349.953px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">然后 Cloudflare 仪表板的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">SSL/TLS</strong>」部分，导航到「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Edge Certificates</strong>」选项卡，并将「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Minimum TLS Version</strong>」改为「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">TLS 1.2</strong>」：</p><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/EdgeCertificates.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 175.078px; width: 369px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/EdgeCertificates.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 175.078px; width: 369px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/MinimumTLSVersion.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 175.078px; width: 369px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/MinimumTLSVersion.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 175.078px; width: 369px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><hr style="box-sizing: content-box; outline: none; margin: 0px; padding: 0px; height: 0px; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-radius: 1px; border-bottom-style: solid; border-bottom-color: rgba(68, 68, 68, 0.1);"><h3 id="部署-Authenticated-Origin-Pulls" style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; font-size: 1.25rem; font-weight: 500; text-align: left; color: var(--color-h3); position: relative; pointer-events: none;"><a href="https://ericclose.github.io/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare.html#%E9%83%A8%E7%BD%B2-Authenticated-Origin-Pulls" class="headerlink" title="部署 Authenticated Origin Pulls" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: inherit; cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; pointer-events: auto;"></a>部署 Authenticated Origin Pulls</h3><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">如果在 Nginx 服务器上设置了「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Authenticated Origin Pulls</strong>」，就可以确保它只接受来自 Cloudflare 服务器的请求，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">防止</strong>任何其他人<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">直接连接到 Nginx 服务器</strong>。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">要使「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Authenticated Origin Pulls</strong>」正常工作，需要在 Cloudflare 中使用完全 SSL，并更新源 Web 服务器 SSL 配置。下载<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://support.cloudflare.com/hc/en-us/article_attachments/360044928032/origin-pull-ca.pem" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">origin-pull-ca.pem</a>，<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">并将证书<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">origin-pull-ca.pem</code><span>&nbsp;</span>的内容写入到服务器的<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">/etc/ssl/cloudflare.crt</code><span>&nbsp;</span>中</strong>。关于 Nginx 的相关配置下一节会讲解</p><ol style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">点击 Cloudflare 仪表板中的「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">SSL/TLS</strong>」部分，导航到「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Origin Server</strong>」选项卡并打开「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">Authenticated Origin Pulls</strong>」选项 。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/36.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 456.641px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/36.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 456.641px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div></div></details>

1. **将证书 `origin-pull-ca.pem` 的内容写入到服务器的 `/etc/ssl/cloudflare.crt` 中**

你可以选择**下载证书** [origin-pull-ca.pem](https://support.cloudflare.com/hc/en-us/article_attachments/360044928032/origin-pull-ca.pem)，或者**直接复制**证书的内容：

```
COPY-----BEGIN CERTIFICATE-----
MIIGCjCCA/KgAwIBAgIIV5G6lVbCLmEwDQYJKoZIhvcNAQENBQAwgZAxCzAJBgNV
BAYTAlVTMRkwFwYDVQQKExBDbG91ZEZsYXJlLCBJbmMuMRQwEgYDVQQLEwtPcmln
aW4gUHVsbDEWMBQGA1UEBxMNU2FuIEZyYW5jaXNjbzETMBEGA1UECBMKQ2FsaWZv
cm5pYTEjMCEGA1UEAxMab3JpZ2luLXB1bGwuY2xvdWRmbGFyZS5uZXQwHhcNMTkx
MDEwMTg0NTAwWhcNMjkxMTAxMTcwMDAwWjCBkDELMAkGA1UEBhMCVVMxGTAXBgNV
BAoTEENsb3VkRmxhcmUsIEluYy4xFDASBgNVBAsTC09yaWdpbiBQdWxsMRYwFAYD
VQQHEw1TYW4gRnJhbmNpc2NvMRMwEQYDVQQIEwpDYWxpZm9ybmlhMSMwIQYDVQQD
ExpvcmlnaW4tcHVsbC5jbG91ZGZsYXJlLm5ldDCCAiIwDQYJKoZIhvcNAQEBBQAD
ggIPADCCAgoCggIBAN2y2zojYfl0bKfhp0AJBFeV+jQqbCw3sHmvEPwLmqDLqynI
42tZXR5y914ZB9ZrwbL/K5O46exd/LujJnV2b3dzcx5rtiQzso0xzljqbnbQT20e
ihx/WrF4OkZKydZzsdaJsWAPuplDH5P7J82q3re88jQdgE5hqjqFZ3clCG7lxoBw
hLaazm3NJJlUfzdk97ouRvnFGAuXd5cQVx8jYOOeU60sWqmMe4QHdOvpqB91bJoY
QSKVFjUgHeTpN8tNpKJfb9LIn3pun3bC9NKNHtRKMNX3Kl/sAPq7q/AlndvA2Kw3
Dkum2mHQUGdzVHqcOgea9BGjLK2h7SuX93zTWL02u799dr6Xkrad/WShHchfjjRn
aL35niJUDr02YJtPgxWObsrfOU63B8juLUphW/4BOjjJyAG5l9j1//aUGEi/sEe5
lqVv0P78QrxoxR+MMXiJwQab5FB8TG/ac6mRHgF9CmkX90uaRh+OC07XjTdfSKGR
PpM9hB2ZhLol/nf8qmoLdoD5HvODZuKu2+muKeVHXgw2/A6wM7OwrinxZiyBk5Hh
CvaADH7PZpU6z/zv5NU5HSvXiKtCzFuDu4/Zfi34RfHXeCUfHAb4KfNRXJwMsxUa
+4ZpSAX2G6RnGU5meuXpU5/V+DQJp/e69XyyY6RXDoMywaEFlIlXBqjRRA2pAgMB
AAGjZjBkMA4GA1UdDwEB/wQEAwIBBjASBgNVHRMBAf8ECDAGAQH/AgECMB0GA1Ud
DgQWBBRDWUsraYuA4REzalfNVzjann3F6zAfBgNVHSMEGDAWgBRDWUsraYuA4REz
alfNVzjann3F6zANBgkqhkiG9w0BAQ0FAAOCAgEAkQ+T9nqcSlAuW/90DeYmQOW1
QhqOor5psBEGvxbNGV2hdLJY8h6QUq48BCevcMChg/L1CkznBNI40i3/6heDn3IS
zVEwXKf34pPFCACWVMZxbQjkNRTiH8iRur9EsaNQ5oXCPJkhwg2+IFyoPAAYURoX
VcI9SCDUa45clmYHJ/XYwV1icGVI8/9b2JUqklnOTa5tugwIUi5sTfipNcJXHhgz
6BKYDl0/UP0lLKbsUETXeTGDiDpxZYIgbcFrRDDkHC6BSvdWVEiH5b9mH2BON60z
0O0j8EEKTwi9jnafVtZQXP/D8yoVowdFDjXcKkOPF/1gIh9qrFR6GdoPVgB3SkLc
5ulBqZaCHm563jsvWb/kXJnlFxW+1bsO9BDD6DweBcGdNurgmH625wBXksSdD7y/
fakk8DagjbjKShYlPEFOAqEcliwjF45eabL0t27MJV61O/jHzHL3dknXeE4BDa2j
bA+JbyJeUMtU7KMsxvx82RmhqBEJJDBCJ3scVptvhDMRrtqDBW5JShxoAOcpFQGm
iYWicn46nPDjgTU0bX1ZPpTpryXbvciVL5RkVBuyX2ntcOLDPlZWgxZCBp96x07F
AnOzKgZk4RzZPNAxCXERVxajn/FLcOhglVAKo5H0ac+AitlQ0ip55D2/mf8o72tM
fVQ6VpyjEXdiIXWUq/o=
-----END CERTIFICATE-----
```

使用 vim 编辑 `/etc/ssl/cloudflare.crt`，**将证书内容粘贴进去**即可：

```
COPYsudo vim /etc/ssl/cloudflare.crt
```

## Nginx 证书和密钥、反向代理的配置

**请将本文中的 `ericclose.xyz` 替换成您注册的域名**

前面只是把证书和私钥的内容写入到服务器，Nginx 的相关配置并没有写，所以这一节就让我们完成它：

使用 vim 编辑文件 `/etc/nginx/sites-available/ericclose.xyz`：

```
COPYsudo vim /etc/nginx/sites-available/ericclose.xyz
```

修改后的文件如下：

```
/etc/nginx/sites-available/ericclose.xyzCOPYserver {
  listen 80 default_server;
  listen [::]:80 default_server;

  server_name ericclose.xyz www.ericclose.xyz;

  return 301 https://$host$request_uri;
}

server {
  listen 443 ssl http2;
  listen [::]:443 ssl http2;

  ssl_certificate /etc/ssl/cert.pem;
  ssl_certificate_key /etc/ssl/key.pem;
  ssl_client_certificate /etc/ssl/cloudflare.crt;
  ssl_verify_client on;
  ssl_session_timeout 1d;
  ssl_session_cache shared:MozSSL:10m;  # about 40000 sessions
  ssl_session_tickets off;

  # intermediate configuration
  ssl_protocols TLSv1.2 TLSv1.3;
  ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
  ssl_prefer_server_ciphers off;

  # HSTS (ngx_http_headers_module is required) (63072000 seconds)
  add_header Strict-Transport-Security "max-age=63072000" always;

  server_name ericclose.xyz www.ericclose.xyz;

  root /var/www/ericclose.xyz/html;
  index index.html index.htm index.nginx-debian.html;


  location / {
    try_files $uri $uri/ =404;
  }

  location /ray {
    if ($http_upgrade != "websocket") {
      return 404;
    }
    proxy_redirect off;
    proxy_pass http://127.0.0.1:10000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;

    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
}
```

> - **注意要记得修改配置文件中的 `server_name` 项和 `root` 项的 `ericclose.xyz`，更改为您的域名即可**。
> - 配置文件中 `proxy_pass http://127.0.0.1:10000;` 的 `10000` 必须和前面 V2Ray 配置文件（`/usr/local/etc/v2ray/config.json`）中的 `port` 一致。
> - `location /ray { ... }` 这里的 `/ray` 必须与前面 V2Ray 配置文件中的 `path` 一致（相互对应）。

**然后重启 nginx 服务**：

```
COPYsudo systemctl restart nginx
```

**现在您可以再次访问您注册的域名来判断配置是否正确，如无误将会看到您之前访问域名的页面，同时可以注意到浏览器已经显示是 `HTTPS` 链接了。**

- 为了更具真实的网站伪装效果，**您可以自行寻找些前端模板**套上去（本文将不会赘述）

**最后你需要在你从本机中的 `known_hosts` 文件中删除所有属于你服务器的键（否则你下次将无法正常的通过 ssh 登录到你的服务器）：**

**即通过 \*cmd\* 或其他终端程序执行命令**

```
COPYssh-keygen -R 你的服务器_IP_地址
```

## 自启并启动相关服务

```
COPYsudo systemctl enable v2ray nginx --now   # 自启并启动 V2ray 和 Nginx 的服务
sudo systemctl status -l v2ray nginx      # 查看 V2ray 和 Nginx 服务的状态
```

## TCP BBR

- **TCP BBR**（Bottleneck Bandwidth and Round-trip propagation time）是由 Google 设计的一种**拥塞控制算法**。自从 *Linux Kernel 4.9* 开始就引入了该算法，但**默认没有启用，所以需要手动开启**。

**启用**该算法仅需在 `/etc/sysctl.conf` 文件**末尾追加两行内容**：

```
COPYsudo bash -c "echo 'net.core.default_qdisc=fq' >> /etc/sysctl.conf"
sudo bash -c "echo 'net.ipv4.tcp_congestion_control=bbr' >> /etc/sysctl.conf"
```

接下来你需要重启系统或者直接**使用 \*systemctl\* 重载变更**。

```
COPYsudo sysctl --system
```

您可以使用以下 *sysctl* 命令**验证配置是否生效**，如下：

```
COPYsudo sysctl net.core.default_qdisc
```

- 若输出结果为 `net.core.default_qdisc = fq`，则配置已生效

```
COPYsudo sysctl net.ipv4.tcp_congestion_control
```

- 若输出结果为 `net.ipv4.tcp_congestion_control = bbr`，则配置已生效

## 客户端配置（懒人方法）

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">关于客户端配置的说明</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><p style="box-sizing: border-box; outline: none; margin: 0px 0px 1em; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">关于客户端配置文件的编写，可以先用<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">v2rayN 生成<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">vmess://</code><span>&nbsp;</span>链接</strong>，之后<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">再通过<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://sub-web.netlify.app/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">Subscription Converter</a><span>&nbsp;</span>进行转换</strong>即可🤣。</p><ol style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">前往<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://github.com/2dust/v2rayN/releases/latest" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">V2RayN 下载页</a><span>&nbsp;</span>找到<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">v2rayN-Core.zip</code><span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">下载</strong>，然后<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">解压</strong>后找到<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">主程序<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">v2rayN.exe</code></strong><span>&nbsp;</span>双击运行。双击 v2rayN 的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">托盘图标</strong>，然后就会弹出<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">主界面窗口</strong>。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/37.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 416.25px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/37.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 416.25px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><ol start="2" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">服务器</strong>」 -&gt; 「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">添加 Vmess 服务器</strong>」，然后请<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">根据服务端的配置</strong>对内容进行填写。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/38.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 298px; width: 417.797px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/38.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 298px; width: 417.797px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/39.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 298px; width: 320.203px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/39.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 298px; width: 320.203px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><blockquote style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 16px; background: var(--color-block); border-left: 4px solid rgb(33, 150, 243); border-radius: 4px; position: relative; width: 742px; transition: all 0.28s ease 0s; text-align: left; overflow-wrap: normal; font-size: 0.9375rem;"><ul style="box-sizing: border-box; outline: none; margin: 0.5em 0px 0.5em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial; text-align: left; overflow-wrap: normal;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">地址（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">address</code>）</strong>：可以填写您<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">注册的域名</strong>（也可以是 Cloudflare 的 CDN IP，关于这个后面会讲）</li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">端口（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">port</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">HTTPS 端口号</strong>，即填写<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">443</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">用户 ID</strong>（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">id</code>）：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">与 V2Ray 服务端的配置一致</strong>，也就是之前生成的 UUID，即<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">9dfe7fee-d08f-44f8-ad2d-300d4c9c3a0e</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">额外 ID（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">alterId</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">与 V2Ray 服务端的配置一致</strong>，即<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">64</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">加密方式（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">security</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">自动</strong>，即<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">auto</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">别名（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">remarks</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">节点名称</strong>，可自定义，这里我取名为<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">node</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">传输协议（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">network</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">WebSocket</strong>，即<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">ws</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">伪装类型（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">type</code>）</strong>：<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">none</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">伪装域名（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">host</code>）</strong>：填写您<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">注册的域名</strong>，我的是<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">ericclose.xyz</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">路径（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">path</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">与 V2Ray 服务端的配置一致</strong>，即<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">/ray</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">底层传输安全（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">tls</code>）</strong>：<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">tls</code></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">跳过证书验证（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">allowInsecure</code>）</strong>：<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">是否允许不安全连接</strong>（用于客户端）。当<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">值为<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">true</code><span>&nbsp;</span>时，V2Ray 不会检查远端主机所提供的 TLS 证书的有效性</strong>，所以<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">为了安全起见我们选择<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">false</code></strong><span>&nbsp;</span>。</li></ul></blockquote><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">填写完成确认即可。</p><ol start="3" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">如果你想要<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">直接使用 v2rayN 进行代理上网</strong>的话，只需要<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">鼠标右键点击 v2rayN 的托盘图标</strong>，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">启用 HTTP 代理</strong>，可以是<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">全局或 PAC（<em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">proxy auto-config</em>，代理自动配置） 模式</strong>，取决于你个人需求。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/40.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 177.719px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/40.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 177.719px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">此时如果你配置没出问题的话，那么你已经能够科学上网了。</p><ol start="4" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">如果你想<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">使用其他客户端，如 clash，Quantumult X 等</strong>。那么你需要在 v2rayN 主界面选中节点<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">node</code>，点击「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">分享</strong>」，即可<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">生成<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">vmess://</code><span>&nbsp;</span>链接</strong>。访问<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://sub-web.netlify.app/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">Subscription Converter</a><span>&nbsp;</span>网站，选择「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">基础模式</strong>」，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">复制生成的<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">vmess://</code><span>&nbsp;</span>链接到指定位置</strong>，选择<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">你想要使用的客户端</strong>，最后「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">生成订阅链接</strong>」即可。</li></ol><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/41.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 224.688px; width: 315.031px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/41.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 224.688px; width: 315.031px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/42.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 224.688px; width: 422.969px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/42.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 224.688px; width: 422.969px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div></div></details>

- *关于各个客户端的使用方法，不属于本文讨论的范畴。*

## 优选 Cloudflare CDN 节点 IP

直接通过本地的 DNS **解析您注册域名**得到的 Cloudflare CDN 的 IP，有时可能速度很不理想，尤其是我使用的**中国电信宽带到了晚上高峰期（20:00 ~ 24:00）的时候特别差劲**。通过一个测试工具 *CloudflareSpeedTest* 优选出几个 Cloudflare 的 CDN 节点 IP，可以相对缓解这种情况。**由于不同的运营商、不同的地域或不同的时间段，相同的 CDN 节点 IP 表现具有差异，所以建议就是各自在自己的网络环境下进行测试**。

<details cyan="" open="" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 16px; display: block; border-radius: 4px; background: var(--color-card); font-size: 0.9375rem; transition: all 0.28s ease 0s; border-color: rgba(27, 205, 252, 0.3); border-top-style: ; border-top-width: ; border-right-style: ; border-right-width: ; border-bottom-style: ; border-bottom-width: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ;"><summary style="box-sizing: border-box; outline: none; margin: -16px -16px 0px; padding: 16px; display: block; cursor: pointer; border-radius: 4px 4px 0px 0px; color: rgb(68, 68, 68); font-size: 0.875rem; font-weight: bold; position: relative; line-height: normal; background: rgb(232, 250, 254); border-bottom: 1px solid rgba(27, 205, 252, 0.3);">优选 Cloudflare CDN 节点 IP 的说明</summary><div class="content" style="box-sizing: border-box; outline: none; margin: 0px -16px -16px; padding: 16px;"><ul style="box-sizing: border-box; outline: none; margin: 0px 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/releases/latest" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">CloudflareSpeedTest 项目 latest release 下载页</a></li></ul><ol style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><p style="box-sizing: border-box; outline: none; margin: 4px 0px 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">根据您的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">操作系统</strong>和<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">处理器架构</strong>进行选择下载，以我这边 Windows x64 为例子，我下载的是<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">CloudflareST_windows_amd64.zip</code>，下载后进行解压。</p></li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;"><p style="box-sizing: border-box; outline: none; margin: 4px 0px 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">首先<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">cmd</em><span>&nbsp;</span>切换到<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">CloudflareST.exe</code><span>&nbsp;</span>所在的目录，如<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">F:\Downloads\CloudflareST_windows_amd64</code>：</p></li></ol><figure class="highlight bat" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);"><span class="built_in" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(75, 167, 238);">cd</span> /d F:\Downloads\CloudflareST_windows_amd64</span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><ol start="3" style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: decimal;">此处我以我<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">平常使用的命令加几个选项</strong>为例子：</li></ol><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">如需要找到<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">20</em><span>&nbsp;</span>个平均延迟低于<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">300 ms</em><span>&nbsp;</span>且下载速度高于<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">5 MB/s</em><span>&nbsp;</span>的 IP 才会停止测速。</p><figure class="highlight bat" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; display: block; position: relative; width: 742px; background: var(--color-block); font-size: 0.8125rem; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; border-radius: 4px; line-height: 1.5; -webkit-font-smoothing: auto; transition: all 0.28s ease 0s;"><table style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border-collapse: collapse; overflow: auto; display: block; max-width: 100%; vertical-align: text-top; background-color: transparent; border: none;"><tbody style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><tr style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; word-break: keep-all; background-color: transparent; transition: all 0.28s ease 0s;"><td class="code" style="box-sizing: border-box; outline: none; margin: 0px; padding: 20px 16px; border: none; line-height: 1.5; font-size: 12px; vertical-align: top; background-color: transparent;"><button class="btn-copy" data-clipboard-snippet="" style="box-sizing: border-box; outline: none; margin: 0px; padding: 4px 8px; color: var(--color-meta); font-style: inherit; font-variant: inherit; font-weight: bold; font-stretch: inherit; font-size: 11px; line-height: inherit; font-family: Menlo, Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; overflow: visible; text-transform: none; appearance: none; cursor: pointer; z-index: 1; display: inline-block; border: none; user-select: none; background: var(--color-card); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 2px 0px; position: absolute; top: 1px; right: 1px; opacity: 0; transition: all 0.28s ease 0s;"><i class="fas fa-copy" style="box-sizing: border-box; outline: none; margin: 0px 4px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; line-height: 1; font-family: &quot;Font Awesome 5 Free&quot;; font-weight: 900;"></i><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">COPY</span></button><pre style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; tab-size: 4; overflow: auto hidden; font-family: Menlo, UbuntuMono, Monaco, monospace, courier, sans-serif; font-size: 0.8125rem; position: relative; display: block; background: transparent; border: none; border-radius: 4px;"><span class="line" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgba(68, 68, 68, 0.9);">CloudflareST.exe -tl <span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">300</span> -sl <span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">5</span> -dn <span class="number" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(253, 134, 7);">20</span></span><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></pre></td></tr></tbody></table></figure><blockquote style="box-sizing: border-box; outline: none; margin: 0.5em 0px; padding: 16px; background: var(--color-block); border-left: 4px solid rgb(33, 150, 243); border-radius: 4px; position: relative; width: 742px; transition: all 0.28s ease 0s; text-align: left; overflow-wrap: normal; font-size: 0.9375rem;"><ul style="box-sizing: border-box; outline: none; margin: 0.5em 0px 0.5em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial; text-align: left; overflow-wrap: normal;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">-tl</code>:<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">平均延迟上限</strong>，只输出低于指定平均延迟的 IP</li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">-sl</code>:<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">下载速度下限</strong>，输出高于指定下载速度的 IP</li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;"><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">-dn</code>:<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">符合条件的 IP 数量</strong>，即指定输出符合<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">延迟</strong>和<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">下载速度</strong>要求的 IP 数量</li><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">完整的使用方法请参考<a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/blob/master/README.md" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">项目 README</a>。</li></ul></blockquote><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/43.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 339.938px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/43.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 339.938px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">当我们得到了一组优选 IP 后，如何使用这些 CDN 节点呢？我们只需要在 v2rayN 填写的<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">地址（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">address</code>）</strong>处，分别填写<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">排名靠前的几个 IP 就行</strong>。具体操作：</p><ul style="box-sizing: border-box; outline: none; margin: 1em 0px 1em 16px; padding: 0px 0px 0px 8px; font-size: 0.9375rem; list-style: initial;"><li style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; list-style: initial;">v2rayN 主界面<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">鼠标右键选中原有的节点</strong><span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">node</code>，选择「<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">克隆所选服务器</strong>」，然后<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">双击克隆得到的节点</strong>，将<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">地址（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">address</code>）</strong>修改为优选得到的 IP，如<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">104.31.79.91</code>，<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">别名（<code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">remarks</code>）</strong>取自己喜欢的就好，如<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">node1</code>。</li></ul><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/44.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 298px; width: 417.797px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/44.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 298px; width: 417.797px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div><br style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/45.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 298px; width: 320.203px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/45.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 298px; width: 320.203px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">如想添加多几个节点，就多克隆几个。</p><p style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">至于<strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">其他客户端的配置转换</strong>依然可以使用<span>&nbsp;</span><a target="_blank" rel="noopener" href="https://sub-web.netlify.app/" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word;">Subscription Converter</a>，将生成得到的数个<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">vmess://</code><span>&nbsp;</span>链接分行粘贴到<span>&nbsp;</span><em style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;">Subscription Converter</em><span>&nbsp;</span>中，最后再生成订阅链接就完事了。</p><div galleryflag="" itemscope="" itemtype="http://schema.org/ImageGallery" class="gallery " data-group="default" style="box-sizing: border-box; outline: none; margin: 1em 0px; padding: 0px !important; overflow: hidden; display: flex; justify-content: center; flex-wrap: nowrap; align-items: stretch;"><div class="fancybox" style="box-sizing: border-box; outline: none; margin: 1px; padding: 0px; display: flex; -webkit-box-direction: normal; -webkit-box-orient: vertical; flex-flow: column nowrap; justify-content: center; align-items: center; overflow: hidden; border-radius: 2px; position: relative;"><a class="fancybox" pjax-fancybox="" itemscope="" itemtype="http://schema.org/ImageObject" itemprop="url" target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/46.png" data-fancybox="default" data-caption="undefined" style="box-sizing: border-box; outline: none; margin: 0px auto; padding: 0px; color: rgb(33, 150, 243); cursor: pointer; text-decoration: none; transition: all 0.28s ease 0s; word-break: break-word; line-height: 0; align-items: stretch; height: 298.312px; width: 740px;"><img fancybox="" itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/ericclose/images/V2Ray-TLS-WebSocket-Nginx-with-Cloudflare/46.png" alt="This is a picture without description" style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; border: 0px; background: none; max-width: 100%; position: relative; transition: all 0.28s ease 0s; object-fit: cover; height: 298.312px; width: 740px; display: inline;"></a><span style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px;"></span></div></div><p style="box-sizing: border-box; outline: none; margin: 1em 0px 0px; padding: 0px; text-align: justify; max-width: 100%; line-height: inherit;">P.S.<span>&nbsp;</span><strong style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-weight: bold;">一条一条的生成<span>&nbsp;</span><code style="box-sizing: border-box; outline: none; margin: 0px; padding: 0px; font-family: UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial, Menlo, Monaco, monospace, sans-serif; font-size: 1em; word-break: break-all; color: var(--color-inlinecode); border-radius: 2px;">vmess://</code><span>&nbsp;</span>链接还是挺麻烦的，所以建议各位学会自己编写你所使用的客户端的配置文件</strong><span>&nbsp;</span>🤣</p></div></details>

